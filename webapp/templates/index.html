{% extends "base.html" %}

{% block content %}
<h2 id="basic-events-table"></h2>
<div class="btn-group">

    <button class="btn btn-default" id="hide-loading" data-method="hideLoading">
        Hide Loading
    </button>
    <button class="btn btn-default" id="refresh" data-method="refresh">
        Refresh
    </button>
</div>
    <table id="authors-table" data-timeperiods="{{ timeperiods }}"  data-toggle="table" >
        <thead>
        <tr>
            {% for title in titles %}
                <th data-field="{{ title }}">{{ title }}</th>
            {% endfor %}
        </tr>
        </thead>
    </table>

{% endblock %}

{% block js_footer %}
    <script>
         $(function () {
        var idx = 0;
              $.getJSON("timeperiod/"+ $('#authors-table').data('timeperiods')[idx], function(res) {
              $('#basic-events-table').text($('#authors-table').data('timeperiods')[idx]);
                    $('#authors-table').bootstrapTable('load',res.timeperiod);
                });
            $('#basic-events-table').next().click(function () {
                  $.getJSON("timeperiod/"+ $('#authors-table').data('timeperiods')[idx++], function(res) {
                  $('#basic-events-table').text($('#authors-table').data('timeperiods')[idx]);
                    $('#authors-table').bootstrapTable('load',res.timeperiod);
                });


{#            $table = $('#authors-table');#}
{#                localStorage.timeperiods = $table.data('timeperiods');#}
                $('#refresh').click(function (data) {

            });
            });
        });
        function responseHandler(res) {


            return res.timeperiod;
        }
    </script>

{% endblock %}